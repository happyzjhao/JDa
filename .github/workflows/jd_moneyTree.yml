name: jd_moneyTree
on:
  workflow_dispatch:
  schedule:
    - cron: '0 */2 * * *'
jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        run: |
          git clone -b master https://gitlab.com/MrRight/Scripts.git ~/scripts
      - name: Use Node.js ${{ matrix.node-version }}
        uses: actions/setup-node@v1
        with:
          node-version: ${{ matrix.node-version }}
      - name: Cache node_modules
        uses: actions/cache@v2 # 使用 GitHub 官方的缓存 Action。
        env:
          cache-name: cache-node-modules
        with:
          path: node_modules
          key: ${{ runner.os }}-${{ env.cache-name }}-${{ hashFiles('package-lock.json') }} # 使用 package-lock.json 的 Hash 作为缓存的 key。也可以使用 package.json 代替
      - name: npm install
        run: |
          cd ~/scripts
          npm install
      - name: '运行 【京东摇钱树】'
        run: |
          cd ~/scripts
          node jd_moneyTree.js
        env:
          JD_COOKIE: ${{ secrets.JD_COOKIE }}
          JD_DEBUG: ${{ secrets.JD_DEBUG }}
          PUSH_KEY: ${{ secrets.PUSH_KEY }}
          BARK_PUSH: ${{ secrets.BARK_PUSH }}
          TG_BOT_TOKEN: ${{ secrets.TG_BOT_TOKEN }}
          TG_USER_ID: ${{ secrets.TG_USER_ID }}
          BARK_SOUND: ${{ secrets.BARK_SOUND }}
          DD_BOT_TOKEN: ${{ secrets.DD_BOT_TOKEN }}
          DD_BOT_SECRET: ${{ secrets.DD_BOT_SECRET }}
          IGOT_PUSH_KEY: ${{ secrets.IGOT_PUSH_KEY }}{
  DD_BOT_SECRET: '***',
  LEIN_HOME: '/usr/local/lib/lein',
  M2_HOME: '/usr/share/apache-maven-3.6.3',
  ANDROID_HOME: '/usr/local/lib/android/sdk',
  JAVA_HOME_11_X64: '/usr/lib/jvm/adoptopenjdk-11-hotspot-amd64',
  ImageVersion: '20201210.0',
  AGENT_TOOLSDIRECTORY: '/opt/hostedtoolcache',
  LANG: 'C.UTF-8',
  JD_COOKIE: '***\n' +
    '***',
  AZURE_EXTENSION_DIR: '/opt/az/azcliextensions',
  POWERSHELL_DISTRIBUTION_CHANNEL: 'GitHub-Actions-ubuntu18',
  DD_BOT_TOKEN: '***',
  GITHUB_API_URL: 'https://api.github.com',
  INVOCATION_ID: '8f0882db527b46b987cfe17102ed7b09',
  BOOST_ROOT_1_72_0: '/opt/hostedtoolcache/boost/1.72.0/x64',
  JAVA_HOME_12_X64: '/usr/lib/jvm/adoptopenjdk-12-hotspot-amd64',
  ANDROID_SDK_ROOT: '/usr/local/lib/android/sdk',
  RUNNER_TOOL_CACHE: '/opt/hostedtoolcache',
  SWIFT_PATH: '/usr/share/swift/usr/bin',
  JAVA_HOME: '/usr/lib/jvm/adoptopenjdk-8-hotspot-amd64',
  RUNNER_TRACKING_ID: 'github_51098607-8a75-485a-8146-2fd7e4d12b81',
  DOTNET_MULTILEVEL_LOOKUP: '"0"',
  GITHUB_REPOSITORY_OWNER: 'happyzjhao',
  GITHUB_ACTIONS: 'true',
  DOTNET_SKIP_FIRST_TIME_EXPERIENCE: '"1"',
  CI: 'true',
  DOTNET_NOLOGO: '"1"',
  USER: 'runner',
  GITHUB_HEAD_REF: '',
  GITHUB_ACTOR: 'happyzjhao',
  GITHUB_ACTION_REF: '',
  GITHUB_ACTION: 'run2',
  GRADLE_HOME: '/usr/share/gradle',
  PWD: '/home/runner/scripts',
  ImageOS: 'ubuntu18',
  PIPX_HOME: '"/opt/pipx"',
  HOME: '/home/runner',
  GOROOT: '/opt/hostedtoolcache/go/1.14.13/x64',
  JOURNAL_STREAM: '9:19254',
  BARK_PUSH: '',
  GOROOT_1_14_X64: '/opt/hostedtoolcache/go/1.14.13/x64',
  JAVA_HOME_8_X64: '/usr/lib/jvm/adoptopenjdk-8-hotspot-amd64',
  GITHUB_ACTION_REPOSITORY: '',
  RUNNER_TEMP: '/home/runner/work/_temp',
  GITHUB_RETENTION_DAYS: '90',
  GOROOT_1_15_X64: '/opt/hostedtoolcache/go/1.15.6/x64',
  CONDA: '/usr/share/miniconda',
  GOROOT_1_13_X64: '/opt/hostedtoolcache/go/1.13.15/x64',
  GITHUB_ENV: '/home/runner/work/_temp/_runner_file_commands/set_env_254cbd15-e331-46da-b81a-493cddd89287',
  DEBIAN_FRONTEND: 'noninteractive',
  TG_USER_ID: '',
  RUNNER_WORKSPACE: '/home/runner/work/JDa',
  GITHUB_REF: 'refs/heads/main',
  GITHUB_SHA: '5b4bb92cf759778b099f63813fb2c709e8118c3b',
  BARK_SOUND: '',
  GITHUB_RUN_ID: '511855499',
  GITHUB_SERVER_URL: 'https://github.com',
  GECKOWEBDRIVER: '/usr/local/share/gecko_driver',
  DEPLOYMENT_BASEPATH: '/opt/runner',
  GITHUB_EVENT_PATH: '/home/runner/work/_temp/_github_workflow/event.json',
  CHROMEWEBDRIVER: '/usr/local/share/chrome_driver',
  PIPX_BIN_DIR: '"/opt/pipx_bin"',
  HOMEBREW_REPOSITORY: '"/home/linuxbrew/.linuxbrew/Homebrew"',
  GITHUB_GRAPHQL_URL: 'https://api.github.com/graphql',
  RUNNER_OS: 'Linux',
  GITHUB_BASE_REF: '',
  IGOT_PUSH_KEY: '',
  VCPKG_INSTALLATION_ROOT: '/usr/local/share/vcpkg',
  TG_BOT_TOKEN: '',
  GITHUB_PATH: '/home/runner/work/_temp/_runner_file_commands/add_path_254cbd15-e331-46da-b81a-493cddd89287',
  GITHUB_JOB: 'build',
  PERFLOG_LOCATION_SETTING: 'RUNNER_PERFLOG',
  JAVA_HOME_7_X64: '/usr/lib/jvm/zulu-7-azure-amd64',
  RUNNER_USER: 'runner',
  SHLVL: '1',
  HOMEBREW_PREFIX: '"/home/linuxbrew/.linuxbrew"',
  GITHUB_REPOSITORY: 'happyzjhao/JDa',
  JD_DEBUG: '',
  GITHUB_EVENT_NAME: 'watch',
  LEIN_JAR: '/usr/local/lib/lein/self-installs/leiningen-2.9.5-standalone.jar',
  JDNIAN_SHARECODES: '',
  GITHUB_RUN_NUMBER: '19',
  RUNNER_PERFLOG: '/home/runner/perflog',
  GITHUB_WORKFLOW: 'jd_nian_sign 炸年兽签到',
  ANT_HOME: '/usr/share/ant',
  PATH: '/home/linuxbrew/.linuxbrew/bin:/home/linuxbrew/.linuxbrew/sbin:/opt/pipx_bin:/usr/share/rust/.cargo/bin:/home/runner/.config/composer/vendor/bin:/home/runner/.dotnet/tools:/snap/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin',
  SELENIUM_JAR_PATH: '/usr/share/java/selenium-server-standalone.jar',
  GITHUB_WORKSPACE: '/home/runner/work/JDa/JDa',
  CHROME_BIN: '/usr/bin/google-chrome',
  HOMEBREW_CELLAR: '"/home/linuxbrew/.linuxbrew/Cellar"',
  PUSH_KEY: '',
  OLDPWD: '/home/runner/work/JDa/JDa',
  _: '/usr/local/bin/node'
}